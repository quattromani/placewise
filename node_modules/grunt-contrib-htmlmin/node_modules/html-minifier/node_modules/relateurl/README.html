<!DOCTYPE  html>
<html>
  <head>
    <meta charset="utf-8">
    
    <title>doc</title>
    <style>
      /*github.com style (c) Vasily Polovnyov <vast@whiteants.net>*/
      pre code {
        display: block; padding: 0.5em;
        color: #333;
        background: #f8f8ff
      }
      pre .comment,
      pre .template_comment,
      pre .diff .header,
      pre .javadoc {
        color: #998;
        font-style: italic
      }
      pre .keyword,
      pre .css .rule .keyword,
      pre .winutils,
      pre .javascript .title,
      pre .nginx .title,
      pre .subst,
      pre .request,
      pre .status {
        color: #333;
        font-weight: bold
      }
      pre .number,
      pre .hexcolor,
      pre .ruby .constant {
        color: #099;
      }
      pre .string,
      pre .tag .value,
      pre .phpdoc,
      pre .tex .formula {
        color: #d14
      }
      pre .title,
      pre .id {
        color: #900;
        font-weight: bold
      }
      pre .javascript .title,
      pre .lisp .title,
      pre .clojure .title,
      pre .subst {
        font-weight: normal
      }
      pre .class .title,
      pre .haskell .type,
      pre .vhdl .literal,
      pre .tex .command {
        color: #458;
        font-weight: bold
      }
      pre .tag,
      pre .tag .title,
      pre .rules .property,
      pre .django .tag .keyword {
        color: #000080;
        font-weight: normal
      }
      pre .attribute,
      pre .variable,
      pre .lisp .body {
        color: #008080
      }
      pre .regexp {
        color: #009926
      }
      pre .class {
        color: #458;
        font-weight: bold
      }
      pre .symbol,
      pre .ruby .symbol .string,
      pre .lisp .keyword,
      pre .tex .special,
      pre .prompt {
        color: #990073
      }
      pre .built_in,
      pre .lisp .title,
      pre .clojure .built_in {
        color: #0086b3
      }
      pre .preprocessor,
      pre .pi,
      pre .doctype,
      pre .shebang,
      pre .cdata {
        color: #999;
        font-weight: bold
      }
      pre .deletion {
        background: #fdd
      }
      pre .addition {
        background: #dfd
      }
      pre .diff .change {
        background: #0086b3
      }
      pre .chunk {
        color: #aaa
      }
    </style>
  </head>
  <body>  
    <h1 id="relateurl-npm-version-http-badge-fury-io-js-relateurl-svg-http-badge-fury-io-js-relateurl-build-status-https-secure-travis-ci-org-stevenvachon-relateurl-svg-http-travis-ci-org-stevenvachon-relateurl-">relateurl <a href="http://badge.fury.io/js/relateurl"><img src="http://badge.fury.io/js/relateurl.svg" alt="NPM Version"></a> <a href="http://travis-ci.org/stevenvachon/relateurl"><img src="https://secure.travis-ci.org/stevenvachon/relateurl.svg" alt="Build Status"></a></h1>
<blockquote>
<p>Minify URLs by converting them from absolute to relative.</p>
</blockquote>
<p>If you were to use this library on a website like <code>http://example.com/dir1/dir1-1/</code>, you would get results such as:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Before</th>
<th style="text-align:left">After</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>http://example.com/dir1/dir1-2/index.html</code></td>
<td style="text-align:left"><code>../dir1-2/</code></td>
</tr>
<tr>
<td style="text-align:left"><code>http://example.com/dir2/dir2-1/</code></td>
<td style="text-align:left"><code>/dir2/dir2-1/</code></td>
</tr>
<tr>
<td style="text-align:left"><code>http://example.com/dir1/dir1-1/</code></td>
<td style="text-align:left"><code> </code></td>
</tr>
<tr>
<td style="text-align:left"><code>https://example.com/dir1/dir1-1/</code></td>
<td style="text-align:left"><code>https://example.com/dir1/dir1-1/</code></td>
</tr>
<tr>
<td style="text-align:left"><code>http://google.com:80/dir/</code></td>
<td style="text-align:left"><code>//google.com/dir/</code></td>
</tr>
<tr>
<td style="text-align:left"><code>../../../../../../../../#anchor</code></td>
<td style="text-align:left"><code>/#anchor</code></td>
</tr>
</tbody>
</table>
<p><strong>All string parsing.</strong> <em>No</em> directory browsing. It is thoroughly tested, very fast and lightweight with zero external dependencies.</p>
<h2 id="getting-started">Getting Started</h2>
<p>This utility requires <a href="http://nodejs.org/">Node.js</a> <code>~0.10</code>. To install, type this at the command line:</p>
<pre><code>npm install relateurl --save-dev</code></pre>
<h3 id="options">Options</h3>
<h4 id="options-defaultports">options.defaultPorts</h4>
<p>Type: <code>Object</code><br>Default value: <code>{ftp:21, http:80, https:443}</code>  </p>
<p>Extend the list with any ports you need. Any URLs containing these default ports will have them removed. Example: <code>http://example.com:80/</code> will become <code>http://example.com/</code>.</p>
<h4 id="options-directoryindexes">options.directoryIndexes</h4>
<p>Type: <code>Array</code><br>Default value: <code>[&quot;index.html&quot;]</code>  </p>
<p>Extend the list with any resources you need. Works with <a href="#options.removeDirectoryIndexes"><code>options.removeDirectoryIndexes</code></a>.</p>
<h4 id="options-ignore_www">options.ignore_www</h4>
<p>Type: <code>Boolean</code><br>Default value: <code>false</code>  </p>
<p>This will, for example, consider any domains containing <code>http://www.example.com/</code> to be related to any that contain <code>http://example.com/</code>.</p>
<h4 id="options-output">options.output</h4>
<p>Type: constant or <code>String</code><br>Choices: <code>RelateUrl.ABSOLUTE</code>,<code>RelateUrl.PATH_RELATIVE</code>,<code>RelateUrl.ROOT_RELATIVE</code>,<code>RelateUrl.SHORTEST</code><br>Choices: <code>&quot;absolute&quot;</code>,<code>&quot;pathRelative&quot;</code>,<code>&quot;rootRelative&quot;</code>,<code>&quot;shortest&quot;</code><br>Default value: <code>RelateUrl.SHORTEST</code>  </p>
<p><code>RelateUrl.ABSOLUTE</code> will produce an absolute URL. Overrides <a href="#options.schemeRelative"><code>options.schemeRelative</code></a> with a value of <code>false</code>.<br><code>RelateUrl.PATH_RELATIVE</code> will produce something like <code>../child-of-parent/etc/</code>.<br><code>RelateUrl.ROOT_RELATIVE</code> will produce something like <code>/child-of-root/etc/</code>.<br><code>RelateUrl.SHORTEST</code> will choose whichever is shortest between root- and path-relative.  </p>
<h4 id="options-rejectedschemes">options.rejectedSchemes</h4>
<p>Type: <code>Array</code><br>Default value: <code>[&quot;data&quot;,&quot;javascript&quot;,&quot;mailto&quot;]</code>  </p>
<p>Extend the list with any additional schemes. Example: <code>javascript:something</code> will not be modified.</p>
<h4 id="options-removeauth">options.removeAuth</h4>
<p>Type: <code>Boolean</code><br>Default value: <code>false</code>  </p>
<p>Remove user authentication information from the output URL.</p>
<h4 id="options-removedirectoryindexes">options.removeDirectoryIndexes</h4>
<p>Type: <code>Boolean</code><br>Default value: <code>true</code>  </p>
<p>Remove any resources that match any found in <a href="#options.directoryIndexes"><code>options.directoryIndexes</code></a>.</p>
<h4 id="options-removeemptyqueries">options.removeEmptyQueries</h4>
<p>Type: <code>Boolean</code><br>Default value: <code>false</code>  </p>
<p>Remove empty query variables. Example: <code>http://domain.com/?var1&amp;var2=&amp;var3=asdf</code> will become <code>http://domain.com/?var3=adsf</code>. This does not apply to unrelated URLs (with other protocols, auths, hosts and/or ports).</p>
<h4 id="options-removeroottrailingslash">options.removeRootTrailingSlash</h4>
<p>Type: <code>Boolean</code><br>Default value: <code>true</code>  </p>
<p>Remove trailing slashes from root paths. Example: <code>http://domain.com/?var</code> will become <code>http://domain.com?var</code> while <code>http://domain.com/dir/?var</code> will not be modified.</p>
<h4 id="options-schemerelative">options.schemeRelative</h4>
<p>Type: <code>Boolean</code><br>Default value: <code>true</code>  </p>
<p>Output URLs relative to the scheme. Example: <code>http://example.com/</code> will become <code>//example.com/</code>.</p>
<h4 id="options-site">options.site</h4>
<p>Type: <code>String</code><br>Default value: <code>undefined</code>  </p>
<p>An options-based version of the <a href="#examples"><code>from</code></a> argument. If both are specified, <code>from</code> takes priority.</p>
<h4 id="options-slashesdenotehost">options.slashesDenoteHost</h4>
<p>Type: <code>Boolean</code><br>Default value: <code>true</code>  </p>
<p>Passed to Node&#39;s <a href="http://nodejs.org/api/url.html#url_url_parse_urlstr_parsequerystring_slashesdenotehost"><code>url.parse</code></a>.</p>
<h3 id="examples">Examples</h3>
<p>This library can be used as a <a href="#single-instance">function for single-use</a> or as a <a href="#reusable-instances">class for multiple conversions</a>.</p>
<p>Upon successful conversion, a <code>String</code> will be returned. If an issue is encountered while parsing <code>from</code>, an error will be thrown.</p>
<h4 id="single-instance">Single Instance</h4>
<pre><code class="lang-js">var RelateUrl = require(&quot;relateurl&quot;);

var result = RelateUrl.relate(from, to, options);</code></pre>
<h4 id="reusable-instances">Reusable Instances</h4>
<pre><code class="lang-js">var RelateUrl = require(&quot;relateurl&quot;);

var instance = new RelateUrl(from, options);

var result1 = instance.relate(to1);
var result2 = instance.relate(to2, customOptions);
var result3 = instance.relate(to3);</code></pre>
<h2 id="faq">FAQ</h2>
<ol>
<li><p><strong>Why bother writing/using this?</strong><br>To aid in further minifying HTML, mainly for the purpose of faster page loads and SEO. It&#39;s been integrated into <a href="https://github.com/kangax/html-minifier">HTMLMinifier</a>.</p>
</li>
<li><p><strong>Why not just use Node&#39;s <code>url.parse</code>, <code>url.resolve</code> and <code>path.relative</code>?</strong><br><code>url.parse</code> <em>is</em> used, but <code>url.resolve</code> and <code>path.relative</code> are both slower and less powerful than this library.</p>
</li>
</ol>
<h2 id="release-history">Release History</h2>
<ul>
<li>0.2.6 minor enhancements</li>
<li>0.2.5 added <code>options.removeRootTrailingSlash</code></li>
<li>0.2.4 added <code>options.site</code></li>
<li>0.2.3 added browserify npm-script</li>
<li>0.2.2 removed task runner</li>
<li>0.2.1 shorten resource- and query-relative URLs, test variations list with other site URLs</li>
<li>0.2.0 code cleanup, <code>options.removeEmptyQueries=true</code> only applied to unrelated URLs</li>
<li>0.1.0 initial release</li>
</ul>
<h2 id="roadmap">Roadmap</h2>
<ul>
<li>0.2.7 possible <a href="http://www.iana.org/assignments/uri-schemes/uri-schemes.xhtml">scheme exclusions</a> such as <code>tel:</code></li>
<li>0.2.7 decipher and return invalid input (special cases) to complete test suite</li>
<li>0.3.0 test <code>options.slashesDenoteHost=false</code>, add something like <code>options.externalDirectoryIndexes=[]</code> for external sites</li>
</ul>
<hr>
<p><a href="https://github.com/igrigorik/ga-beacon" title="Google Analytics"><img src="https://ga-beacon.appspot.com/UA-3614308-13/stevenvachon/relateurl" alt="Analytics"></a></p>

  </body>
</html>
