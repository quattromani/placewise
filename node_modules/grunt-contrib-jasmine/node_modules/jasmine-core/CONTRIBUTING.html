<!DOCTYPE  html>
<html>
  <head>
    <meta charset="utf-8">
    
    <title>doc</title>
    <style>
      /*github.com style (c) Vasily Polovnyov <vast@whiteants.net>*/
      pre code {
        display: block; padding: 0.5em;
        color: #333;
        background: #f8f8ff
      }
      pre .comment,
      pre .template_comment,
      pre .diff .header,
      pre .javadoc {
        color: #998;
        font-style: italic
      }
      pre .keyword,
      pre .css .rule .keyword,
      pre .winutils,
      pre .javascript .title,
      pre .nginx .title,
      pre .subst,
      pre .request,
      pre .status {
        color: #333;
        font-weight: bold
      }
      pre .number,
      pre .hexcolor,
      pre .ruby .constant {
        color: #099;
      }
      pre .string,
      pre .tag .value,
      pre .phpdoc,
      pre .tex .formula {
        color: #d14
      }
      pre .title,
      pre .id {
        color: #900;
        font-weight: bold
      }
      pre .javascript .title,
      pre .lisp .title,
      pre .clojure .title,
      pre .subst {
        font-weight: normal
      }
      pre .class .title,
      pre .haskell .type,
      pre .vhdl .literal,
      pre .tex .command {
        color: #458;
        font-weight: bold
      }
      pre .tag,
      pre .tag .title,
      pre .rules .property,
      pre .django .tag .keyword {
        color: #000080;
        font-weight: normal
      }
      pre .attribute,
      pre .variable,
      pre .lisp .body {
        color: #008080
      }
      pre .regexp {
        color: #009926
      }
      pre .class {
        color: #458;
        font-weight: bold
      }
      pre .symbol,
      pre .ruby .symbol .string,
      pre .lisp .keyword,
      pre .tex .special,
      pre .prompt {
        color: #990073
      }
      pre .built_in,
      pre .lisp .title,
      pre .clojure .built_in {
        color: #0086b3
      }
      pre .preprocessor,
      pre .pi,
      pre .doctype,
      pre .shebang,
      pre .cdata {
        color: #999;
        font-weight: bold
      }
      pre .deletion {
        background: #fdd
      }
      pre .addition {
        background: #dfd
      }
      pre .diff .change {
        background: #0086b3
      }
      pre .chunk {
        color: #aaa
      }
    </style>
  </head>
  <body>  
    <h1 id="developing-for-jasmine-core">Developing for Jasmine Core</h1>
<p>We welcome your contributions - Thanks for helping make Jasmine a better project for everyone. Please review the backlog and discussion lists (the main group - <a href="http://groups.google.com/group/jasmine-js"><a href="http://groups.google.com/group/jasmine-js">http://groups.google.com/group/jasmine-js</a></a> and the developer&#39;s list - <a href="http://groups.google.com/group/jasmine-js-dev"><a href="http://groups.google.com/group/jasmine-js-dev">http://groups.google.com/group/jasmine-js-dev</a></a>) before starting work - what you&#39;re looking for may already have been done. If it hasn&#39;t, the community can help make your contribution better.</p>
<h2 id="general-workflow">General Workflow</h2>
<p>Please submit pull requests via feature branches using the semi-standard workflow of:</p>
<ol>
<li>Fork it</li>
<li>Clone your fork: (<code>git clone git@github.com:yourUserName/jasmine.git</code>)                                                                                                                         </li>
<li>Change directory: (<code>cd jasmine</code>)                                                                                                                                                               </li>
<li>Asign original repository to a remote named &#39;upstream&#39;: (<code>git remote add                                                                                                                       
upstream https://github.com/pivotal/jasmine.git</code>)                                                                                                                                                 </li>
<li>Pull in changes not present in your local repository: (<code>git fetch upstream</code>)</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am &#39;Add some feature&#39;</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new Pull Request</li>
</ol>
<p>We favor pull requests with very small, single commits with a single purpose.</p>
<h2 id="background">Background</h2>
<h3 id="directory-structure">Directory Structure</h3>
<ul>
<li><code>/src</code> contains all of the source files<ul>
<li><code>/src/console</code> - Node.js-specific files</li>
<li><code>/src/core</code> - generic source files</li>
<li><code>/src/html</code> - browser-specific files</li>
</ul>
</li>
<li><code>/spec</code> contains all of the tests<ul>
<li>mirrors the source directory</li>
<li>there are some additional files</li>
</ul>
</li>
<li><code>/dist</code> contains the standalone distributions as zip files</li>
<li><code>/lib</code> contains the generated files for distribution as the Jasmine Rubygem and the Python package</li>
</ul>
<h3 id="self-testing">Self-testing</h3>
<p>Note that Jasmine tests itself. The files in <code>lib</code> are loaded first, defining the reference <code>jasmine</code>. Then the files in <code>src</code> are loaded, defining the reference <code>j$</code>. So there are two copies of the code loaded under test.</p>
<p>The tests should always use <code>j$</code> to refer to the objects and functions that are being tested. But the tests can use functions on <code>jasmine</code> as needed. <em>Be careful how you structure any new test code</em>. Copy the patterns you see in the existing code - this ensures that the code you&#39;re testing is not leaking into the <code>jasmine</code> reference and vice-versa.</p>
<h3 id="-boot-js-"><code>boot.js</code></h3>
<p><strong>This is new for Jasmine 2.0.</strong></p>
<p>This file does all of the setup necessary for Jasmine to work. It loads all of the code, creates an <code>Env</code>, attaches the global functions, and builds the reporter. It also sets up the execution of the <code>Env</code> - for browsers this is in <code>window.onload</code>. While the default in <code>lib</code> is appropriate for browsers, projects may wish to customize this file.</p>
<p>For example, for Jasmine development there is a different <code>dev_boot.js</code> for Jasmine development that does more work.</p>
<h3 id="compatibility">Compatibility</h3>
<ul>
<li>Browser Minimum<ul>
<li>IE8</li>
<li>Firefox 3.x</li>
<li>Chrome ??</li>
<li>Safari 5</li>
</ul>
</li>
</ul>
<h2 id="development">Development</h2>
<p>All source code belongs in <code>src/</code>. The <code>core/</code> directory contains the bulk of Jasmine&#39;s functionality. This code should remain browser- and environment-agnostic. If your feature or fix cannot be, as mentioned above, please degrade gracefully. Any code that should only be in a non-browser environment should live in <code>src/console/</code>. Any code that depends on a browser (specifically, it expects <code>window</code> to be the global or <code>document</code> is present) should live in <code>src/html/</code>.</p>
<h3 id="install-dependencies">Install Dependencies</h3>
<p>Jasmine Core relies on Ruby and Node.js.</p>
<p>To install the Ruby dependencies, you will need Ruby, Rubygems, and Bundler available. Then:</p>
<pre><code>$ bundle</code></pre>
<p>...will install all of the Ruby dependencies.</p>
<p>To install the Node dependencies, you will need Node.js, Npm, and <a href="http://gruntjs.com/">Grunt</a>, the <a href="https://github.com/gruntjs/grunt-cli">grunt-cli</a> and ensure that <code>grunt</code> is on your path.</p>
<pre><code>$ npm install --local</code></pre>
<p>...will install all of the node modules locally. If when you run</p>
<pre><code>$ grunt</code></pre>
<p>...you see that JSHint runs your system is ready.</p>
<h3 id="how-to-write-new-jasmine-code">How to write new Jasmine code</h3>
<p>Or, How to make a successful pull request</p>
<ul>
<li><em>Do not change the public interface</em>. Lots of projects depend on Jasmine and if you aren&#39;t careful you&#39;ll break them</li>
<li><em>Be environment agnostic</em> - server-side developers are just as important as browser developers</li>
<li><em>Be browser agnostic</em> - if you must rely on browser-specific functionality, please write it in a way that degrades gracefully</li>
<li><em>Write specs</em> - Jasmine&#39;s a testing framework; don&#39;t add functionality without test-driving it</li>
<li><em>Write code in the style of the rest of the repo</em> - Jasmine should look like a cohesive whole</li>
<li><em>Ensure the <em>entire</em> test suite is green</em> in all the big browsers, Node, and JSHint - your contribution shouldn&#39;t break Jasmine for other users</li>
</ul>
<p>Follow these tips and your pull request, patch, or suggestion is much more likely to be integrated.</p>
<h3 id="running-specs">Running Specs</h3>
<p>Jasmine uses the <a href="http://github.com/pivotal/jasmine-gem">Jasmine Ruby gem</a> to test itself in browser.</p>
<pre><code>$ rake jasmine</code></pre>
<p>...and then visit <code>http://localhost:8888</code> to run specs.</p>
<p>Jasmine uses the <a href="http://github.com/pivotal/jasmine-npm">Jasmine NPM package</a> to test itself in a Node.js/npm environment.</p>
<pre><code>$ grunt execSpecsInNode</code></pre>
<p>...and then the results will print to the console. All specs run except those that expect a browser (the specs in <code>spec/html</code> are ignored).</p>
<h2 id="before-committing-or-submitting-a-pull-request">Before Committing or Submitting a Pull Request</h2>
<ol>
<li>Ensure all specs are green in browser <em>and</em> node</li>
<li>Ensure JSHint is green with <code>grunt jshint</code></li>
<li>Build <code>jasmine.js</code> with <code>grunt buildDistribution</code> and run all specs again - this ensures that your changes self-test well</li>
</ol>
<h2 id="submitting-a-pull-request">Submitting a Pull Request</h2>
<ol>
<li>Revert your changes to <code>jasmine.js</code> and <code>jasmine-html.js</code><ul>
<li>We do this because <code>jasmine.js</code> and <code>jasmine-html.js</code> are auto-generated (as you&#39;ve seen in the previous steps) and accepting multiple pull requests when this auto-generated file changes causes lots of headaches.</li>
</ul>
</li>
<li>When we accept your pull request, we will generate these files as a separate commit and merge the entire branch into master.</li>
</ol>
<p>Note that we use Travis for Continuous Integration. We only accept green pull requests.</p>

  </body>
</html>
