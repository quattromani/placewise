<!DOCTYPE  html>
<html>
  <head>
    <meta charset="utf-8">
    
    <title>doc</title>
    <style>
      /*github.com style (c) Vasily Polovnyov <vast@whiteants.net>*/
      pre code {
        display: block; padding: 0.5em;
        color: #333;
        background: #f8f8ff
      }
      pre .comment,
      pre .template_comment,
      pre .diff .header,
      pre .javadoc {
        color: #998;
        font-style: italic
      }
      pre .keyword,
      pre .css .rule .keyword,
      pre .winutils,
      pre .javascript .title,
      pre .nginx .title,
      pre .subst,
      pre .request,
      pre .status {
        color: #333;
        font-weight: bold
      }
      pre .number,
      pre .hexcolor,
      pre .ruby .constant {
        color: #099;
      }
      pre .string,
      pre .tag .value,
      pre .phpdoc,
      pre .tex .formula {
        color: #d14
      }
      pre .title,
      pre .id {
        color: #900;
        font-weight: bold
      }
      pre .javascript .title,
      pre .lisp .title,
      pre .clojure .title,
      pre .subst {
        font-weight: normal
      }
      pre .class .title,
      pre .haskell .type,
      pre .vhdl .literal,
      pre .tex .command {
        color: #458;
        font-weight: bold
      }
      pre .tag,
      pre .tag .title,
      pre .rules .property,
      pre .django .tag .keyword {
        color: #000080;
        font-weight: normal
      }
      pre .attribute,
      pre .variable,
      pre .lisp .body {
        color: #008080
      }
      pre .regexp {
        color: #009926
      }
      pre .class {
        color: #458;
        font-weight: bold
      }
      pre .symbol,
      pre .ruby .symbol .string,
      pre .lisp .keyword,
      pre .tex .special,
      pre .prompt {
        color: #990073
      }
      pre .built_in,
      pre .lisp .title,
      pre .clojure .built_in {
        color: #0086b3
      }
      pre .preprocessor,
      pre .pi,
      pre .doctype,
      pre .shebang,
      pre .cdata {
        color: #999;
        font-weight: bold
      }
      pre .deletion {
        background: #fdd
      }
      pre .addition {
        background: #dfd
      }
      pre .diff .change {
        background: #0086b3
      }
      pre .chunk {
        color: #aaa
      }
    </style>
  </head>
  <body>  
    <h1 id="how-to-work-on-a-jasmine-release">How to work on a Jasmine Release</h1>
<h2 id="development">Development</h2>
<p><strong><em>Jasmine Core Maintainers Only</em></strong></p>
<p>Follow the instructions in <code>CONTRIBUTING.md</code> during development.</p>
<h3 id="git-rules">Git Rules</h3>
<p>Please work on feature branches.</p>
<p>Please attempt to keep commits to <code>master</code> small, but cohesive. If a feature is contained in a bunch of small commits (e.g., it has several wip commits or small work), please squash them when merging back to <code>master</code>.</p>
<h3 id="version">Version</h3>
<p>We attempt to stick to <a href="http://semver.org/">Semantic Versioning</a>. Most of the time, development should be against a new minor version - fixing bugs and adding new features that are backwards compatible.</p>
<p>The current version lives in the file <code>/package.json</code>. This file should be set to the version that is <em>currently</em> under development. That is, if version 1.0.0 is the current release then version should be incremented say, to 1.1.0.</p>
<p>This version is used by both <code>jasmine.js</code> and the <code>jasmine-core</code> Ruby gem.</p>
<p>Note that Jasmine should <em>not</em> use the &quot;patch&quot; version number. Let downstream projects rev their patch versions as needed, keeping their major and minor version numbers in sync with Jasmine core.</p>
<h2 id="release">Release</h2>
<p>When ready to release - specs are all green and the stories are done:</p>
<ol>
<li>Update the release notes in <code>release_notes</code> - use the Anchorman gem to generate the markdown file and edit accordingly</li>
<li>Update the version in <code>package.json</code> to a release candidate</li>
<li>Update any links or top-level landing page for the Github Pages</li>
</ol>
<h3 id="build-standalone-distribution">Build standalone distribution</h3>
<ol>
<li>Build the standalone distribution with <code>grunt buildStandaloneDist</code></li>
<li>Make sure you add the new ZIP file to git<ol>
<li>Should we still do this? Given we want to use github releases...</li>
</ol>
</li>
</ol>
<h3 id="release-the-python-egg">Release the Python egg</h3>
<ol>
<li><code>python setup.py register sdist upload</code> You will need pypi credentials to upload the egg.</li>
</ol>
<h3 id="release-the-ruby-gem">Release the Ruby gem</h3>
<ol>
<li>Copy version to the Ruby gem with <code>grunt build:copyVersionToGem</code></li>
<li><strong>NOTE</strong>: You will likely need to point to a local jasmine gem in order to run tests locally. <em>Do not</em> push this version of the Gemfile.</li>
<li><strong>NOTE</strong>: You will likely need to push a new jasmine gem with a dependent version right after this release.</li>
<li>Push these changes to GitHub and verify that this SHA is green</li>
<li><code>rake release</code> - tags the repo with the version, builds the <code>jasmine-core</code> gem, pushes the gem to Rubygems.org. In order to release you will have to ensure you have rubygems creds locally.</li>
</ol>
<h3 id="release-the-npm">Release the NPM</h3>
<ol>
<li><code>npm adduser</code> to save your credentials locally</li>
<li><code>npm publish .</code> to publish what&#39;s in <code>package.json</code></li>
</ol>
<h3 id="release-the-docs">Release the docs</h3>
<p>Probably only need to do this when releasing a minor version, and not a patch version.</p>
<ol>
<li><code>cp edge ${version}</code> to copy the current edge docs to the new version</li>
<li>Add a link to the new version in <code>index.html</code></li>
</ol>
<h3 id="finally">Finally</h3>
<ol>
<li>Visit the <a href="https://github.com/pivotal/jasmine/releases">Releases page for Jasmine</a>, find the tag just pushed.<ol>
<li>Paste in a link to the correct release notes for this release. The link should reference the blob and tag correctly, and the markdown file for the notes.</li>
<li>If it is a pre-release, mark it as such.</li>
<li>Attach the standalone zipfile</li>
</ol>
</li>
</ol>
<p>There should be a post to Pivotal Labs blog and a tweet to that link.</p>

  </body>
</html>
