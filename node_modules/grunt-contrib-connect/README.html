<!DOCTYPE  html>
<html>
  <head>
    <meta charset="utf-8">
    
    <title>doc</title>
    <style>
      /*github.com style (c) Vasily Polovnyov <vast@whiteants.net>*/
      pre code {
        display: block; padding: 0.5em;
        color: #333;
        background: #f8f8ff
      }
      pre .comment,
      pre .template_comment,
      pre .diff .header,
      pre .javadoc {
        color: #998;
        font-style: italic
      }
      pre .keyword,
      pre .css .rule .keyword,
      pre .winutils,
      pre .javascript .title,
      pre .nginx .title,
      pre .subst,
      pre .request,
      pre .status {
        color: #333;
        font-weight: bold
      }
      pre .number,
      pre .hexcolor,
      pre .ruby .constant {
        color: #099;
      }
      pre .string,
      pre .tag .value,
      pre .phpdoc,
      pre .tex .formula {
        color: #d14
      }
      pre .title,
      pre .id {
        color: #900;
        font-weight: bold
      }
      pre .javascript .title,
      pre .lisp .title,
      pre .clojure .title,
      pre .subst {
        font-weight: normal
      }
      pre .class .title,
      pre .haskell .type,
      pre .vhdl .literal,
      pre .tex .command {
        color: #458;
        font-weight: bold
      }
      pre .tag,
      pre .tag .title,
      pre .rules .property,
      pre .django .tag .keyword {
        color: #000080;
        font-weight: normal
      }
      pre .attribute,
      pre .variable,
      pre .lisp .body {
        color: #008080
      }
      pre .regexp {
        color: #009926
      }
      pre .class {
        color: #458;
        font-weight: bold
      }
      pre .symbol,
      pre .ruby .symbol .string,
      pre .lisp .keyword,
      pre .tex .special,
      pre .prompt {
        color: #990073
      }
      pre .built_in,
      pre .lisp .title,
      pre .clojure .built_in {
        color: #0086b3
      }
      pre .preprocessor,
      pre .pi,
      pre .doctype,
      pre .shebang,
      pre .cdata {
        color: #999;
        font-weight: bold
      }
      pre .deletion {
        background: #fdd
      }
      pre .addition {
        background: #dfd
      }
      pre .diff .change {
        background: #0086b3
      }
      pre .chunk {
        color: #aaa
      }
    </style>
  </head>
  <body>  
    <h1 id="grunt-contrib-connect-v0-9-0-build-status-linux-https-travis-ci-org-gruntjs-grunt-contrib-connect-png-branch-master-https-travis-ci-org-gruntjs-grunt-contrib-connect-">grunt-contrib-connect v0.9.0 <a href="https://travis-ci.org/gruntjs/grunt-contrib-connect"><img src="https://travis-ci.org/gruntjs/grunt-contrib-connect.png?branch=master" alt="Build Status: Linux"></a></h1>
<blockquote>
<p>Start a connect web server.</p>
</blockquote>
<h2 id="getting-started">Getting Started</h2>
<p>This plugin requires Grunt <code>~0.4.0</code></p>
<p>If you haven&#39;t used <a href="http://gruntjs.com/">Grunt</a> before, be sure to check out the <a href="http://gruntjs.com/getting-started">Getting Started</a> guide, as it explains how to create a <a href="http://gruntjs.com/sample-gruntfile">Gruntfile</a> as well as install and use Grunt plugins. Once you&#39;re familiar with that process, you may install this plugin with this command:</p>
<pre><code class="lang-shell">npm install grunt-contrib-connect --save-dev</code></pre>
<p>Once the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:</p>
<pre><code class="lang-js">grunt.loadNpmTasks(&#39;grunt-contrib-connect&#39;);</code></pre>
<h2 id="connect-task">Connect task</h2>
<p><em>Run this task with the <code>grunt connect</code> command.</em></p>
<p>Note that this server only runs as long as grunt is running. Once grunt&#39;s tasks have completed, the web server stops. This behavior can be changed with the <a href="#keepalive">keepalive</a> option, and can be enabled ad-hoc by running the task like <code>grunt connect:keepalive</code>.</p>
<p>This task was designed to be used in conjunction with another task that is run immediately afterwards, like the <a href="https://github.com/gruntjs/grunt-contrib-qunit">grunt-contrib-qunit plugin</a> <code>qunit</code> task.</p>
<h3 id="options">Options</h3>
<h4 id="port">port</h4>
<p>Type: <code>Integer</code><br>Default: <code>8000</code></p>
<p>The port on which the webserver will respond. The task will fail if the specified port is already in use. You can use the special values <code>0</code> or <code>&#39;?&#39;</code> to use a system-assigned port.</p>
<h4 id="protocol">protocol</h4>
<p>Type: <code>String</code><br>Default: <code>&#39;http&#39;</code></p>
<p>May be <code>&#39;http&#39;</code> or <code>&#39;https&#39;</code>.</p>
<h4 id="hostname">hostname</h4>
<p>Type: <code>String</code><br>Default: <code>&#39;0.0.0.0&#39;</code></p>
<p>The hostname the webserver will use.</p>
<p>Setting it to <code>&#39;*&#39;</code> will make the server accessible from anywhere.</p>
<h4 id="base">base</h4>
<p>Type: <code>String</code> or <code>Array</code> or <code>Object</code><br>Default: <code>&#39;.&#39;</code></p>
<table>
<thead>
<tr>
<th>Type</th>
<th style="text-align:left">Result</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>String</em></td>
<td style="text-align:left">The base (or root) directory from which files will be served. Defaults to the project Gruntfile&#39;s directory.</td>
<td><code>&#39;public&#39;</code></td>
</tr>
<tr>
<td><em>Array</em></td>
<td style="text-align:left">Array of <code>String</code> (or <code>Object</code>) bases to serve multiple directories. The last base given will be the [directory][] to become browse-able.</td>
<td><code>[&#39;public&#39;,&#39;www-root&#39;]</code></td>
</tr>
<tr>
<td><em>Object</em></td>
<td style="text-align:left">Map containing <code>path</code> and <code>options</code> keys. <code>options</code> are passed on to the <a href="http://www.senchalabs.org/connect/static.html">connect.static</a> module.</td>
<td><code>{ path: &#39;public&#39;, options: { maxAge: 1000*60*5 } }</code></td>
</tr>
</tbody>
</table>
<h4 id="directory">directory</h4>
<p>Type: <code>String</code><br>Default: <code>null</code></p>
<p>Set to the directory you wish to be browse-able. Used to override the <code>base</code> option browse-able directory.</p>
<h4 id="keepalive">keepalive</h4>
<p>Type: <code>Boolean</code><br>Default: <code>false</code></p>
<p>Keep the server alive indefinitely. Note that if this option is enabled, any tasks specified after this task will <em>never run</em>. By default, once grunt&#39;s tasks have completed, the web server stops. This option changes that behavior.</p>
<p>This option can also be enabled ad-hoc by running the task like <code>grunt connect:targetname:keepalive</code></p>
<h4 id="debug">debug</h4>
<p>Type: <code>Boolean</code><br>Default: <code>false</code></p>
<p>Set the <code>debug</code> option to true to enable logging instead of using the <code>--debug</code> flag.</p>
<h4 id="livereload">livereload</h4>
<p>Type: <code>Boolean</code> or <code>Number</code><br>Default: <code>false</code></p>
<p>Set to <code>true</code> or a port number to inject a live reload script tag into your page using <a href="https://github.com/intesso/connect-livereload">connect-livereload</a>.</p>
<p><em>This does not perform live reloading. It is intended to be used in tandem with grunt-contrib-watch or another task that will trigger a live reload server upon files changing.</em></p>
<h4 id="open">open</h4>
<p>Type: <code>Boolean</code> or <code>String</code> or <code>Object</code>
Default: <code>false</code></p>
<p>Open the served page in your default browser. Specifying <code>true</code> opens the default server URL, specifying a URL opens that URL or specify an object with the following keys to configure open directly (each are optional):</p>
<pre><code class="lang-js">{
  target: &#39;http://localhost:8000&#39;, // target url to open
  appName: &#39;open&#39;, // name of the app that opens, ie: open, start, xdg-open
  callback: function() {} // called when the app has opened
}</code></pre>
<h4 id="useavailableport">useAvailablePort</h4>
<p>  Type: <code>Boolean</code>
  Default: <code>false</code></p>
<p>If <code>true</code> the task will look for the next available port after the set <code>port</code> option.</p>
<h4 id="oncreateserver">onCreateServer</h4>
<p>Type: <code>Function</code> or <code>Array</code>
Default: <code>null</code></p>
<p>A function to be called after the server object is created, to allow integrating libraries that need access to connect&#39;s server object. A Socket.IO example:</p>
<pre><code class="lang-js">grunt.initConfig({
  connect: {
    server: {
      options: {
        port: 8000,
        hostname: &#39;*&#39;,
        onCreateServer: function(server, connect, options) {
          var io = require(&#39;socket.io&#39;).listen(server);
          io.sockets.on(&#39;connection&#39;, function(socket) {
            // do something with socket
          });
        }
      }
    }
  }
});</code></pre>
<h4 id="middleware">middleware</h4>
<p>Type: <code>Function</code> or <code>Array</code>
Default: <code>Array</code> of connect middlewares that use <code>options.base</code> for static files and directory browsing</p>
<p>As an <code>Array</code>:</p>
<pre><code class="lang-js">grunt.initConfig({
  connect: {
    server: {
      options: {
        middleware: [
          function myMiddleware(req, res, next) {
            res.end(&#39;Hello, world!&#39;);
          }
        ],
      },
    },
  },
});</code></pre>
<p>As a <code>function</code>:</p>
<pre><code class="lang-js">grunt.initConfig({
  connect: {
    server: {
      options: {
        middleware: function(connect, options, middlewares) {
          // inject a custom middleware into the array of default middlewares
          middlewares.unshift(function(req, res, next) {
            if (req.url !== &#39;/hello/world&#39;) return next();

            res.end(&#39;Hello, world from port #&#39; + options.port + &#39;!&#39;);
          });

          return middlewares;
        },
      },
    },
  },
});</code></pre>
<p>Lets you add in your own Connect middlewares. This option expects a function that returns an array of middlewares. See the <a href="Gruntfile.js">project Gruntfile</a> and <a href="test/connect_test.js">project unit tests</a> for a usage example.</p>
<h3 id="usage-examples">Usage examples</h3>
<h4 id="basic-use">Basic Use</h4>
<p>In this example, <code>grunt connect</code> (or more verbosely, <code>grunt connect:server</code>) will start a static web server at <code>http://localhost:9001/</code>, with its base path set to the <code>www-root</code> directory relative to the gruntfile, and any tasks run afterwards will be able to access it.</p>
<pre><code class="lang-javascript">// Project configuration.
grunt.initConfig({
  connect: {
    server: {
      options: {
        port: 9001,
        base: &#39;www-root&#39;
      }
    }
  }
});</code></pre>
<p>If you want your web server to use the default options, just omit the <code>options</code> object. You still need to specify a target (<code>uses_defaults</code> in this example), but the target&#39;s configuration object can otherwise be empty or nonexistent. In this example, <code>grunt connect</code> (or more verbosely, <code>grunt connect:uses_defaults</code>) will start a static web server using the default options.</p>
<pre><code class="lang-javascript">// Project configuration.
grunt.initConfig({
  connect: {
    uses_defaults: {}
  }
});</code></pre>
<h4 id="multiple-servers">Multiple Servers</h4>
<p>You can specify multiple servers to be run alone or simultaneously by creating a target for each server. In this example, running either <code>grunt connect:site1</code> or <code>grunt connect:site2</code> will  start the appropriate web server, but running <code>grunt connect</code> will run <em>both</em>. Note that any server for which the <a href="#keepalive">keepalive</a> option is specified will prevent <em>any</em> task or target from running after it.</p>
<pre><code class="lang-javascript">// Project configuration.
grunt.initConfig({
  connect: {
    site1: {
      options: {
        port: 9000,
        base: &#39;www-roots/site1&#39;
      }
    },
    site2: {
      options: {
        port: 9001,
        base: &#39;www-roots/site2&#39;
      }
    }
  }
});</code></pre>
<h4 id="connect-static-options">Connect.static Options</h4>
<p>You can specify options to be passed to each instance of the <a href="http://www.senchalabs.org/connect/static.html">connect.static</a> module:</p>
<pre><code class="lang-js">grunt.initConfig({
  connect: {
    server: {
      options: {
        port: 8000,
        base: {
          path: &#39;www-root&#39;,
          options: {
            index: &#39;somedoc.html&#39;,
            maxAge: 300000
          }
        }
      }
    }
  }
});</code></pre>
<h4 id="-"> </h4>
<h4 id="roll-your-own">Roll Your Own</h4>
<p>Like the <a href="#basic-use">Basic Use</a> example, this example will start a static web server at <code>http://localhost:9001/</code>, with its base path set to the <code>www-root</code> directory relative to the gruntfile. Unlike the other example, this is done by creating a brand new task. in fact, this plugin isn&#39;t even installed!</p>
<pre><code class="lang-javascript">// Project configuration.
grunt.initConfig({ /* Nothing needed here! */ });

// After running &quot;npm install connect --save-dev&quot; to add connect as a dev
// dependency of your project, you can require it in your gruntfile with:
var connect = require(&#39;connect&#39;);

// Now you can define a &quot;connect&quot; task that starts a webserver, using the
// connect lib, with whatever options and configuration you need:
grunt.registerTask(&#39;connect&#39;, &#39;Start a custom static web server.&#39;, function() {
  grunt.log.writeln(&#39;Starting static web server in &quot;www-root&quot; on port 9001.&#39;);
  connect(connect.static(&#39;www-root&#39;)).listen(9001);
});</code></pre>
<h4 id="support-for-https">Support for HTTPS</h4>
<p>A default certificate authority, certificate and key file are provided and pre-
configured for use when <code>protocol</code> has been set to <code>https</code>.</p>
<p>NOTE: No passphrase set for the certificate.
If you are getting warnings in Google Chrome, add &#39;server.crt&#39; (from &#39;node_modules/tasks/certs&#39;)
to your keychain.
In OS X, after you add &#39;server.crt&#39;, right click on the certificate,
select &#39;Get Info&#39; - &#39;Trust&#39; - &#39;Always Trust&#39;, close window, restart Chrome.</p>
<p>For HTTPS livereload with <a href="https://github.com/gruntjs/grunt-contrib-watch">grunt-contrib-watch</a> 
 see the last example <a href="https://github.com/gruntjs/grunt-contrib-watch#optionslivereload">here</a>.</p>
<h6 id="advanced-https-config">Advanced HTTPS config</h6>
<p>If the default certificate setup is unsuitable for your environment, OpenSSL
can be used to create a set of self-signed certificates with a local ca root.</p>
<pre><code class="lang-shell">### Create ca.key, use a password phrase when asked
### When asked &#39;Common Name (e.g. server FQDN or YOUR name) []:&#39; use your hostname, i.e &#39;mysite.dev&#39;
openssl genrsa -des3 -out ca.key 1024
openssl req -new -key ca.key -out ca.csr
openssl x509 -req -days 365 -in ca.csr -out ca.crt -signkey ca.key

### Create server certificate
openssl genrsa -des3 -out server.key 1024
openssl req -new -key server.key -out server.csr

### Remove password from the certificate
cp server.key server.key.org
openssl rsa -in server.key.org -out server.key

### Generate self-siged certificate
openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt</code></pre>
<p>For more details on the various options that can be set when configuring SSL,
please see the Node documentation for <a href="http://nodejs.org/api/tls.html#tls_tls_createserver_options_secureconnectionlistener">TLS</a>.</p>
<p>Grunt configuration would become</p>
<pre><code class="lang-javascript">// Project configuration.
grunt.initConfig({
  connect: {
    server: {
      options: {
        protocol: &#39;https&#39;,
        port: 8443,
        key: grunt.file.read(&#39;server.key&#39;).toString(),
        cert: grunt.file.read(&#39;server.crt&#39;).toString(),
        ca: grunt.file.read(&#39;ca.crt&#39;).toString()
      },
    },
  },
});</code></pre>
<h4 id="grunt-events">Grunt Events</h4>
<p>The connect plugin will emit a grunt event, <code>connect.{taskName}.listening</code>, once the server has started. You can listen for this event to run things against a keepalive server, for example:</p>
<pre><code class="lang-javascript">grunt.registerTask(&#39;jasmine-server&#39;, &#39;start web server for jasmine tests in browser&#39;, function() {
  grunt.task.run(&#39;jasmine:tests:build&#39;);

  grunt.event.once(&#39;connect.tests.listening&#39;, function(host, port) {
    var specRunnerUrl = &#39;http://&#39; + host + &#39;:&#39; + port + &#39;/_SpecRunner.html&#39;;
    grunt.log.writeln(&#39;Jasmine specs available at: &#39; + specRunnerUrl);
    require(&#39;open&#39;)(specRunnerUrl);
  });

  grunt.task.run(&#39;connect:tests:keepalive&#39;);
});</code></pre>
<h2 id="release-history">Release History</h2>
<ul>
<li>2014-11-07   v0.9.0   Adds routable middleware. Switch to <code>opn</code> as it fixes some Linux issues. Add support for connect.static instance options.</li>
<li>2014-06-09   v0.8.0   Update connect and connect-livereload.</li>
<li>2014-02-27   v0.7.1   Fixes issue with the &#39;*&#39; hostname option.</li>
<li>2014-02-18   v0.7.0   Update connect to ~2.13.0. Default hostname switched to &#39;0.0.0.0&#39;. Modified options.middleware to accept an array or a function.</li>
<li>2013-12-29   v0.6.0   Open options.hostname if provided. Update connect-livereload to ~0.3.0. Update connect to ~2.12.0. Use well-formed ssl certificates. Support all options of open. Make directory browseable when base is a string.</li>
<li>2013-09-05   v0.5.0   Add &#39;open&#39; option.</li>
<li>2013-09-05   v0.4.2   Un-normalize options.base as it should be a string or an array as the user has set. Fix setting target hostname option.</li>
<li>2013-09-02   v0.4.1   Browse-able directory is the last item supplied to bases. Added directory option to override browse-able directory.</li>
<li>2013-09-01   v0.4.0   Fix logging of which server address. Ability to set multiple bases. Event emitted when server starts listening. Support for HTTPS. debug option added to display debug logging like the --debug flag. livereload option added to inject a livereload snippet into the page.</li>
<li>2013-04-10   v0.3.0   Add ability to listen on system-assigned port.</li>
<li>2013-03-07   v0.2.0   Upgrade connect dependency.</li>
<li>2013-02-17   v0.1.2   Ensure Gruntfile.js is included on npm.</li>
<li>2013-02-15   v0.1.1   First official release for Grunt 0.4.0.</li>
<li>2013-01-18   v0.1.1rc6   Updating grunt/gruntplugin dependencies to rc6. Changing in-development grunt/gruntplugin dependency versions from tilde version ranges to specific versions.</li>
<li>2013-01-09   v0.1.1rc5   Updating to work with grunt v0.4.0rc5.</li>
<li>2012-11-01   v0.1.0   Work in progress, not yet officially released.</li>
</ul>
<hr>
<p>Task submitted by <a href="http://benalman.com">&quot;Cowboy&quot; Ben Alman</a></p>
<p><em>This file was generated on Fri Nov 07 2014 19:12:59.</em></p>

  </body>
</html>
