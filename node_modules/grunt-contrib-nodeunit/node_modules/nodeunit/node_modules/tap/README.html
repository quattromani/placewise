<!DOCTYPE  html>
<html>
  <head>
    <meta charset="utf-8">
    
    <title>doc</title>
    <style>
      /*github.com style (c) Vasily Polovnyov <vast@whiteants.net>*/
      pre code {
        display: block; padding: 0.5em;
        color: #333;
        background: #f8f8ff
      }
      pre .comment,
      pre .template_comment,
      pre .diff .header,
      pre .javadoc {
        color: #998;
        font-style: italic
      }
      pre .keyword,
      pre .css .rule .keyword,
      pre .winutils,
      pre .javascript .title,
      pre .nginx .title,
      pre .subst,
      pre .request,
      pre .status {
        color: #333;
        font-weight: bold
      }
      pre .number,
      pre .hexcolor,
      pre .ruby .constant {
        color: #099;
      }
      pre .string,
      pre .tag .value,
      pre .phpdoc,
      pre .tex .formula {
        color: #d14
      }
      pre .title,
      pre .id {
        color: #900;
        font-weight: bold
      }
      pre .javascript .title,
      pre .lisp .title,
      pre .clojure .title,
      pre .subst {
        font-weight: normal
      }
      pre .class .title,
      pre .haskell .type,
      pre .vhdl .literal,
      pre .tex .command {
        color: #458;
        font-weight: bold
      }
      pre .tag,
      pre .tag .title,
      pre .rules .property,
      pre .django .tag .keyword {
        color: #000080;
        font-weight: normal
      }
      pre .attribute,
      pre .variable,
      pre .lisp .body {
        color: #008080
      }
      pre .regexp {
        color: #009926
      }
      pre .class {
        color: #458;
        font-weight: bold
      }
      pre .symbol,
      pre .ruby .symbol .string,
      pre .lisp .keyword,
      pre .tex .special,
      pre .prompt {
        color: #990073
      }
      pre .built_in,
      pre .lisp .title,
      pre .clojure .built_in {
        color: #0086b3
      }
      pre .preprocessor,
      pre .pi,
      pre .doctype,
      pre .shebang,
      pre .cdata {
        color: #999;
        font-weight: bold
      }
      pre .deletion {
        background: #fdd
      }
      pre .addition {
        background: #dfd
      }
      pre .diff .change {
        background: #0086b3
      }
      pre .chunk {
        color: #aaa
      }
    </style>
  </head>
  <body>  
    <p>This is a mix-and-match set of utilities that you can use to write test
harnesses and frameworks that communicate with one another using the
Test Anything Protocol.</p>
<p>If you don&#39;t yet know what TAP is, <a href="http://testanything.org/">you better ask
somebody</a>.</p>
<p>Default Usage:</p>
<ol>
<li>Make a directory.  Maybe call it &#39;test&#39;.  That&#39;d be nice and obvious.</li>
<li>Put a bunch of test scripts in there.  If they&#39;re node programs, then
they should be &quot;.js&quot;.  Anything else is assumed to be some kind of shell
script, which should have a shebang line.</li>
<li><code>npm install tap</code></li>
<li>Update package.json scripts.test to include <code>tap ./test</code> <a href="https://gist.github.com/4469613">example
gist</a></li>
<li><code>npm test</code></li>
</ol>
<p>The output will be TAP-compliant.</p>
<p>For extra special bonus points, you can do something like this:</p>
<pre><code>var test = require(&quot;tap&quot;).test
test(&quot;make sure the thingie is a thing&quot;, function (t) {
  t.equal(thingie, &quot;thing&quot;, &quot;thingie should be thing&quot;)
  t.deepEqual(array, [&quot;foo&quot;, &quot;bar&quot;], &quot;array has foo and bar elements&quot;)
  t.deepEqual(object, {foo: 42}, &quot;object has foo property&quot;)
  t.type(thingie, &quot;string&quot;, &quot;type of thingie is string&quot;)
  t.ok(true, &quot;this is always true&quot;)
  t.notOk(false, &quot;this is never true&quot;)
  t.test(&quot;a child test&quot;, function (t) {
    t.equal(this, superEasy, &quot;right!?&quot;)
    t.similar(7, 2, &quot;ever notice 7 is kinda like 2?&quot;, {todo: true})
    t.test(&quot;so skippable&quot;, {skip: true}, function (t) {
      t.plan(1) // only one test in this block
      t.ok(true, &quot;but when the flag changes, it&#39;ll pass&quot;)
      // no need to end, since we had a plan.
    })
    t.end()
  })
  t.ok(99, &quot;can also skip individual assertions&quot;, {skip: true})
  // end lets it know it&#39;s over.
  t.end()
})
test(&quot;another one&quot;, function (t) {
  t.plan(1)
  t.ok(true, &quot;It&#39;s ok to plan, and also end.  Watch.&quot;)
  t.end() // but it must match the plan!
})</code></pre>
<p>Node-tap is actually a collection of several modules, any of which may be
mixed and matched however you please.</p>
<p>If you don&#39;t like this test framework, and think you can do much much
better, <em>I strongly encourage you to do so!</em>  If you use this library,
however, at least to output TAP-compliant results when <code>process.env.TAP</code>
is set, then the data coming out of your framework will be much more
consumable by machines.</p>
<p>You can also use this to build programs that <em>consume</em> the TAP data, so
this is very useful for CI systems and such.</p>
<ul>
<li>tap-assert: A collection of assert functions that return TAP result
objects.</li>
<li>tap-consumer: A stream interface for consuming TAP data.</li>
<li>tap-producer: A class that produces a TAP stream by taking in result
objects.</li>
<li>tap-results: A class for keeping track of TAP result objects as they
pass by, counting up skips, passes, fails, and so on.</li>
<li>tap-runner: A program that runs through a directory running all the
tests in it.  (Tests which may or may not be TAP-outputting tests.  But
it&#39;s better if they are.)</li>
<li>tap-test: A class for actually running tests.</li>
<li>tap-harness: A class that runs tests.  (Tests are also Harnesses,
which is how sub-tests run.)</li>
<li>tap-global-harness: A default harness that provides the top-level
support for running TAP tests.</li>
</ul>
<h2 id="experimental-code-coverage-with-runforcover-bunker-">Experimental Code Coverage with runforcover &amp; bunker:</h2>
<pre><code>TAP_COV=1 tap ./test [--cover=./lib,foo.js] [--coverage-dir=./coverage]</code></pre>
<p>This feature is experimental, and will most likely change somewhat
before being finalized.  Feedback welcome.</p>

  </body>
</html>
